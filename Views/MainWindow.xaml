<Window x:Class="DupFree.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="DupFree - Duplicate File Finder" Height="900" Width="1400"
    Background="{DynamicResource AppBackground}"
    Foreground="{DynamicResource WindowForeground}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="256" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0" Background="{DynamicResource SidebarBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,1,0">
            <DockPanel LastChildFill="True">
                <!-- Storage section docked to bottom -->
                <Border DockPanel.Dock="Bottom" Background="{DynamicResource StorageBackground}" Padding="16" Height="110" CornerRadius="8" Margin="16">
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="Storage" Foreground="{DynamicResource MutedForeground}" FontSize="11" Margin="0,0,0,8" />
                        <Grid Height="8" Margin="0,0,0,8" Width="200" HorizontalAlignment="Left">
                            <Border CornerRadius="4" Background="#374151" />
                            <Border x:Name="StorageIndicator" Width="0" HorizontalAlignment="Left" CornerRadius="4" Background="{DynamicResource BlueBrush}" />
                        </Grid>
                        <TextBlock x:Name="StorageText" Text="0 GB used of 0 GB" Foreground="{DynamicResource MutedForeground}" FontSize="11" />
                    </StackPanel>
                </Border>
                
                <!-- Navigation buttons - this will fill remaining space -->
                <StackPanel Margin="24,24,24,0">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <Border Width="40" Height="40" Background="{DynamicResource ScanButtonBrush}" CornerRadius="8" Margin="0,0,12,0">
                            <TextBlock Text="D" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" FontWeight="Bold" FontSize="16" />
                        </Border>
                        <StackPanel>
                            <TextBlock Text="DupFree" FontSize="14" FontWeight="Bold" Foreground="{DynamicResource WindowForeground}" />
                            <TextBlock Text="v1.1" FontSize="11" Foreground="{DynamicResource MutedForeground}" />
                        </StackPanel>
                    </StackPanel>

                    <ToggleButton Name="SidebarScanButton" Click="SidebarScanButton_Click" Style="{StaticResource SidebarToggle}" IsChecked="True" Margin="0,0,0,8" Height="48" Padding="16,12" VerticalContentAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”" Margin="0,0,12,0" FontSize="16" VerticalAlignment="Center" />
                            <TextBlock Text="Scanned Files" FontWeight="Medium" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>
                    <ToggleButton Name="BrowseButton" Click="BrowseButton_Click" Style="{StaticResource SidebarToggle}" Margin="0,0,0,8" Height="48" Padding="16,12" VerticalContentAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“" Margin="0,0,12,0" FontSize="16" VerticalAlignment="Center" />
                            <TextBlock Text="Browse" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>
                    <ToggleButton Name="SidebarSettingsButton" Click="SidebarSettingsButton_Click" Style="{StaticResource SidebarToggle}" Margin="0,0,0,8" Height="48" Padding="16,12" VerticalContentAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™" Margin="0,0,12,0" FontSize="16" VerticalAlignment="Center" />
                            <TextBlock Text="Settings" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>
                    <ToggleButton Name="SidebarHelpButton" Click="SidebarHelpButton_Click" Style="{StaticResource SidebarToggle}" Margin="0,0,0,8" Height="48" Padding="16,12" VerticalContentAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="â”" Margin="0,0,12,0" FontSize="16" VerticalAlignment="Center" />
                            <TextBlock Text="Help" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Column="1" Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Top Filters -->
            <Border Grid.Row="0" Background="{DynamicResource TopBarBackground}" Margin="0" Padding="16" HorizontalAlignment="Stretch">
                <Grid Background="Transparent" HorizontalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0" Height="40" MinWidth="200" Margin="0,0,12,0">
                        <TextBox Name="SearchTextBox" Background="#202938" Foreground="{DynamicResource WindowForeground}" BorderBrush="{DynamicResource BorderBrush}" Height="40" Padding="12,8,12,8" TextChanged="SearchTextBox_TextChanged" />
                        <TextBlock Text="Search files by name..." Margin="12,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource MutedForeground}" IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=SearchTextBox}" Value="">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,12,0">
                        <TextBlock Text="Min Size:" Foreground="{DynamicResource ControlForeground}" Margin="0,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Name="MinSizeComboBox" Width="110" Height="32" SelectedIndex="0" Background="#202938">
                            <ComboBoxItem>All</ComboBoxItem>
                            <ComboBoxItem>1 MB</ComboBoxItem>
                            <ComboBoxItem>10 MB</ComboBoxItem>
                            <ComboBoxItem>100 MB</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,12,0">
                        <TextBlock Text="Limit:" Foreground="{DynamicResource ControlForeground}" Margin="0,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Name="LimitComboBox" Width="110" Height="32" SelectedIndex="0" ToolTip="Limit files scanned" Background="#202938">
                            <ComboBoxItem>All</ComboBoxItem>
                            <ComboBoxItem>100</ComboBoxItem>
                            <ComboBoxItem>1000</ComboBoxItem>
                            <ComboBoxItem>100000</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Grid.Column="4" Orientation="Horizontal">
                        <Button Name="ScanButton" Click="ScanButton_Click" Style="{StaticResource PrimaryButton}" Padding="20,8" Height="40">
                            Scan
                        </Button>
                        <Button Name="CancelButton" Click="CancelButton_Click" Margin="8,0,0,0" Padding="20,8" Height="40" Style="{StaticResource DangerButton}" Visibility="Collapsed">
                            Cancel
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Actions & Status -->
            <Border Grid.Row="1" Background="{DynamicResource ActionBarBackground}" Margin="0" Padding="16,12" HorizontalAlignment="Stretch">
                <Grid Background="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button Name="SelectAllButton" Click="SelectAllButton_Click" Padding="8,4" Margin="0,0,8,0" Style="{StaticResource SecondaryButton}">Select All</Button>
                    <Button Grid.Column="1" Name="DeleteSelectedButton" Click="DeleteSelectedButton_Click" Padding="8,4" Style="{StaticResource DangerButton}">Delete Selected (0)</Button>
                    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button Name="ViewToggleButton" Click="ViewToggleButton_Click" Padding="4,4" VerticalAlignment="Center" Background="{DynamicResource ControlBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="2">
                                    <Grid Width="70" Height="34">
                                        <!-- Sliding indicator -->
                                        <Border x:Name="Indicator" Width="34" Height="34" Background="{DynamicResource ScanButtonBrush}" CornerRadius="6" HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5">
                                            <Border.RenderTransform>
                                                <TranslateTransform x:Name="IndicatorTransform" X="0" />
                                            </Border.RenderTransform>
                                        </Border>
                                        <!-- Button labels -->
                                        <Grid>
                                            <Viewbox Width="18" Height="18" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="8,0,0,0">
                                                <Path Fill="White" Data="M112 208C138.5 208 160 186.5 160 160C160 133.5 138.5 112 112 112C85.5 112 64 133.5 64 160C64 186.5 85.5 208 112 208zM256 128C238.3 128 224 142.3 224 160C224 177.7 238.3 192 256 192L544 192C561.7 192 576 177.7 576 160C576 142.3 561.7 128 544 128L256 128zM256 288C238.3 288 224 302.3 224 320C224 337.7 238.3 352 256 352L544 352C561.7 352 576 337.7 576 320C576 302.3 561.7 288 544 288L256 288zM256 448C238.3 448 224 462.3 224 480C224 497.7 238.3 512 256 512L544 512C561.7 512 576 497.7 576 480C576 462.3 561.7 448 544 448L256 448zM112 528C138.5 528 160 506.5 160 480C160 453.5 138.5 432 112 432C85.5 432 64 453.5 64 480C64 506.5 85.5 528 112 528zM160 320C160 293.5 138.5 272 112 272C85.5 272 64 293.5 64 320C64 346.5 85.5 368 112 368C138.5 368 160 346.5 160 320z" />
                                            </Viewbox>
                                            <Viewbox Width="18" Height="18" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,8,0">
                                                <Path x:Name="GridIcon" Fill="{DynamicResource ControlForeground}" Data="M480 160L352 160L352 288L480 288L480 160zM544 288L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 288zM160 352L160 480L288 480L288 352L160 352zM288 288L288 160L160 160L160 288L288 288zM352 352L352 480L480 480L480 352L352 352z" />
                                            </Viewbox>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Hidden elements for code-behind compatibility -->
            <TextBlock Name="StatusText" Visibility="Collapsed" />
            <ProgressBar Name="ProgressBar" Visibility="Collapsed" />
            <ComboBox Name="SortComboBox" Visibility="Collapsed" />
            <ComboBox Name="UnitComboBox" Visibility="Collapsed" />

            <!-- Content Panels -->
            <Grid Grid.Row="2" Margin="16,8,16,8" Background="{DynamicResource AppBackground}">
                <Grid Name="ScanPanel" Visibility="Visible">
                    <Border Background="{DynamicResource AppBackground}" CornerRadius="8" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Padding="0">
                        <Grid>
                            <DataGrid Name="ResultsDataGrid" Grid.Row="0" Visibility="Visible" 
                                      AutoGenerateColumns="False" 
                                      IsReadOnly="True"
                                      SelectionMode="Extended"
                                      CanUserResizeColumns="True"
                                      CanUserSortColumns="True"
                                      KeyDown="ResultsDataGrid_KeyDown"
                                      PreviewKeyDown="ResultsDataGrid_KeyDown"
                                      MouseDoubleClick="ResultsDataGrid_MouseDoubleClick"
                                      SelectionChanged="ResultsDataGrid_SelectionChanged"
                                      Background="{DynamicResource AppBackground}" 
                                      Foreground="{DynamicResource WindowForeground}"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="None"
                                      RowBackground="{DynamicResource AppBackground}"
                                      AlternatingRowBackground="{DynamicResource AppBackground}"
                                      EnableRowVirtualization="True"
                                      EnableColumnVirtualization="True"
                                      ScrollViewer.CanContentScroll="True"
                                      VirtualizingPanel.IsVirtualizing="True"
                                      VirtualizingPanel.VirtualizationMode="Recycling">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="40">
                                        <DataGridTemplateColumn.Header>
                                            <TextBlock Text="" />
                                        </DataGridTemplateColumn.Header>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox Style="{StaticResource GridCheckBox}"
                                                          IsChecked="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=IsSelected, Mode=TwoWay}"
                                                          PreviewMouseDown="RowCheckBox_PreviewMouseDown" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Header="File Name" Width="260" Binding="{Binding FileName}" />
                                    <DataGridTextColumn Header="Path" Width="*" Binding="{Binding FilePath}" />
                                    <DataGridTextColumn Header="Size" Width="120" Binding="{Binding SizeFormatted}" />
                                    <DataGridTextColumn Header="Duplicates" Width="120" Binding="{Binding DupCount}" />
                                </DataGrid.Columns>
                            </DataGrid>

                            <Grid x:Name="NoResultsPlaceholder" IsHitTestVisible="False">
                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.75">
                                    <Border Width="44" Height="44" CornerRadius="22" Background="{DynamicResource ControlBackground}" Margin="0,0,0,8">
                                        <TextBlock Text="ðŸ“„" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                    <TextBlock Text="No duplicates found" HorizontalAlignment="Center" FontWeight="SemiBold" />
                                    <TextBlock Text="Click Scan to search for duplicate files" HorizontalAlignment="Center" Foreground="{DynamicResource MutedForeground}" FontSize="12" />
                                </StackPanel>
                            </Grid>

                            <ListView Name="ResultsListView" Grid.Row="0" Visibility="Collapsed" KeyDown="ResultsListView_KeyDown" MouseDoubleClick="ResultsListView_MouseDoubleClick" SelectionChanged="ResultsListView_SelectionChanged" Background="{DynamicResource AppBackground}" Foreground="{DynamicResource WindowForeground}" DisplayMemberPath="">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Name" Width="300">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding FileName}" />
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Path" Width="600">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding FilePath}" />
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Size" Width="100">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding SizeFormatted}" />
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Dup Space" Width="120">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding DupSpace}" />
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Dup Count" Width="80">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding DupCount}" />
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>

                            <ScrollViewer Name="ResultsScrollViewer" Grid.Row="0" Visibility="Collapsed" PreviewKeyDown="ResultsPanel_PreviewKeyDown">
                                <Grid Name="ResultsPanel" Background="{DynamicResource AppBackground}" PreviewKeyDown="ResultsPanel_PreviewKeyDown" Focusable="True" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>

                <Grid Name="SettingsPanel" Visibility="Collapsed">
                    <Border Background="{DynamicResource AppBackground}" CornerRadius="12" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Padding="20">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel MaxWidth="800">
                                <TextBlock Text="Settings" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,24" />
                                
                                <!-- File Size Limits Section -->
                                <Border Background="{DynamicResource CardBackground}" CornerRadius="8" Padding="20" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="File Size Limits" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12" />
                                        <TextBlock Text="Set minimum and maximum file sizes to scan (0 = no limit)" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" />
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="Minimum Size (MB)" Foreground="{DynamicResource MutedForeground}" FontSize="12" Margin="0,0,0,8" />
                                                <TextBox Name="MinFileSizeTextBox" Text="0" Height="40" />
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="Maximum Size (MB)" Foreground="{DynamicResource MutedForeground}" FontSize="12" Margin="0,0,0,8" />
                                                <TextBox Name="MaxFileSizeTextBox" Text="0" Height="40" />
                                            </StackPanel>
                                        </Grid>
                                        
                                        <Button Name="SaveFileSizeLimitsButton" Click="SaveFileSizeLimitsButton_Click" Style="{StaticResource PrimaryButton}" Margin="0,16,0,0" Padding="16,10" HorizontalAlignment="Left">
                                            Apply File Size Limits
                                        </Button>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Duplicate Count Limit Section -->
                                <Border Background="{DynamicResource CardBackground}" CornerRadius="8" Padding="20" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Duplicate Display Limit" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12" />
                                        <TextBlock Text="Limit the number of duplicate files to display (0 = show all)" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" />
                                        
                                        <StackPanel>
                                            <TextBlock Text="Maximum Duplicates to Show" Foreground="{DynamicResource MutedForeground}" FontSize="12" Margin="0,0,0,8" />
                                            <TextBox Name="MaxDuplicatesTextBox" Text="0" Height="40" MaxWidth="300" HorizontalAlignment="Left" />
                                        </StackPanel>
                                        
                                        <Button Name="SaveDuplicateLimitButton" Click="SaveDuplicateLimitButton_Click" Style="{StaticResource PrimaryButton}" Margin="0,16,0,0" Padding="16,10" HorizontalAlignment="Left">
                                            Apply Duplicate Limit
                                        </Button>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Grid View Picture Size Section -->
                                <Border Background="{DynamicResource CardBackground}" CornerRadius="8" Padding="20" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Grid View Picture Size" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12" />
                                        <TextBlock Text="Adjust the size of pictures displayed in grid view" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" />
                                        
                                        <StackPanel>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                    <TextBlock Text="Picture Size (pixels)" Foreground="{DynamicResource MutedForeground}" FontSize="12" Margin="0,0,0,8" />
                                                    <Slider Name="GridPictureSizeSlider" Minimum="100" Maximum="300" Value="150" TickFrequency="25" IsSnapToTickEnabled="True" 
                                                            ValueChanged="GridPictureSizeSlider_ValueChanged"
                                                            VerticalAlignment="Center" />
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                    <TextBlock Name="GridPictureSizeValueText" Text="150 px" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource AccentBrush}" />
                                                </StackPanel>
                                            </Grid>
                                            
                                            <TextBlock Text="Preview:" Foreground="{DynamicResource MutedForeground}" FontSize="12" Margin="0,16,0,8" />
                                            <Border Name="GridSizePreviewBorder" Width="150" Height="150" Background="{DynamicResource ControlBackground}" 
                                                    BorderBrush="{DynamicResource BorderBrush}" BorderThickness="2" CornerRadius="8" HorizontalAlignment="Left">
                                                <TextBlock Text="ðŸ–¼" FontSize="48" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{DynamicResource MutedForeground}" />
                                            </Border>
                                        </StackPanel>
                                        
                                        <Button Name="SaveGridSizeButton" Click="SaveGridSizeButton_Click" Style="{StaticResource PrimaryButton}" Margin="0,16,0,0" Padding="16,10" HorizontalAlignment="Left">
                                            Apply Grid Size
                                        </Button>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Grid View File Path Display Section -->
                                <Border Background="{DynamicResource CardBackground}" CornerRadius="8" Padding="20" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Grid View File Path Display" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12" />
                                        <TextBlock Text="Show or hide file path below filename in grid view" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" />
                                        
                                        <CheckBox Name="ShowGridFilePathCheckBox" Content="Show file path below filename" FontSize="14" Margin="0,0,0,16" 
                                                 Foreground="{DynamicResource WindowForeground}" VerticalAlignment="Center" />
                                        
                                        <Button Name="SaveGridFilePathButton" Click="SaveGridFilePathButton_Click" Style="{StaticResource PrimaryButton}" Padding="16,10" HorizontalAlignment="Left">
                                            Apply Setting
                                        </Button>
                                    </StackPanel>
                                </Border>
                                
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>

                <Grid Name="HelpPanel" Visibility="Collapsed">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="0,0,16,0">
                            <!-- Instructions Section -->
                            <Border Background="{DynamicResource CardBackground}" CornerRadius="12" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Padding="24" Margin="0,0,0,16">
                                <StackPanel>
                                    <TextBlock Text="How to Use DupFree" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16" />
                                    
                                    <TextBlock Text="1. Select a Folder" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Click the 'Browse' button in the sidebar to select the folder you want to scan. A file browser dialog will open where you can choose your target directory. The selected path will be shown in the status area." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="2. Set Minimum File Size (Optional)" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Use the 'Min Size' dropdown to filter out small files. For example, select '1 MB' to only find duplicates of files that are 1 MB or larger. This helps reduce clutter in results." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="3. Start Scanning" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Click the 'Scan' button to begin looking for duplicate files. The app will automatically start scanning the first time you select a folder. A progress indicator will show the scan status. Larger folders may take some time to process." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="4. Review Results" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Once scanning completes, results appear in the main view. Use the toggle button to switch between List view (showing details) and Grid view (showing image previews). Use the search box to filter results by filename." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="5. Select and Delete Duplicates" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Click on individual files to select them, or use 'Select All' to choose all results. Click the 'Delete Selected' button to remove the chosen duplicates. Files are safely moved to the Recycle Bin. The space saved will be shown in the storage indicator." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="6. Customize Settings" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="Click 'Settings' in the sidebar to configure additional options: set custom file size limits, limit the number of duplicates displayed, and adjust the grid view thumbnail size." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" LineHeight="20" />
                                </StackPanel>
                            </Border>
                            
            <!-- About Section -->
                            <Border Background="{DynamicResource CardBackground}" CornerRadius="12" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Padding="24">
                                <StackPanel>
                                    <TextBlock Text="About DupFree" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16" />
                                    
                                    <TextBlock Text="DupFree is a fast and intuitive duplicate file finder that helps you reclaim disk space by identifying and removing duplicate files on your computer." 
                                               TextWrapping="Wrap" Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,16" LineHeight="20" />
                                    
                                    <TextBlock Text="Features:" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                                    <TextBlock Text="â€¢ Select folders to scan for duplicates" 
                                               Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,4" />
                                    <TextBlock Text="â€¢ Filter by minimum file size" 
                                               Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,4" />
                                    <TextBlock Text="â€¢ Grid and list view with image previews" 
                                               Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,4" />
                                    <TextBlock Text="â€¢ Safe deletion to Recycle Bin" 
                                               Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,4" />
                                    <TextBlock Text="â€¢ Customizable settings and display options" 
                                               Foreground="{DynamicResource MutedForeground}" Margin="0,0,0,20" />
                                    
                                    <Border Background="{DynamicResource StorageBackground}" CornerRadius="8" Padding="16" Margin="0,8,0,0">
                                        <StackPanel>
                                            <TextBlock Text="Made by Miguel Campos" FontSize="14" FontWeight="SemiBold" HorizontalAlignment="Center" />
                                            <TextBlock Text="Version 1.1" FontSize="12" Foreground="{DynamicResource MutedForeground}" HorizontalAlignment="Center" Margin="0,4,0,0" />
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Grid>

            <!-- Footer Cards -->
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,1,0" Padding="24,16">
                    <StackPanel>
                        <TextBlock Text="FILES CHECKED" Foreground="{DynamicResource MutedForeground}" FontSize="11" Margin="0,0,0,4" />
                        <TextBlock x:Name="FooterFilesChecked" Text="0" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource BlueBrush}" />
                    </StackPanel>
                </Border>
                <Border Grid.Column="1" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,1,0" Padding="24,16">
                    <StackPanel>
                        <TextBlock Text="DUPLICATES" Foreground="{DynamicResource MutedForeground}" FontSize="11" Margin="0,0,0,4" />
                        <TextBlock x:Name="FooterDuplicates" Text="0" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource PurpleBrush}" />
                    </StackPanel>
                </Border>
                <Border Grid.Column="2" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,1,0" Padding="24,16">
                    <StackPanel>
                        <TextBlock Text="SPACE WASTED" Foreground="{DynamicResource MutedForeground}" FontSize="11" Margin="0,0,0,4" />
                        <TextBlock x:Name="FooterSpaceWasted" Text="0 B" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource OrangeBrush}" />
                    </StackPanel>
                </Border>
                <Border Grid.Column="3" Background="{DynamicResource CardBackground}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0" Padding="24,16">
                    <StackPanel>
                        <TextBlock Text="SPACE SAVED" Foreground="{DynamicResource MutedForeground}" FontSize="11" Margin="0,0,0,4" />
                        <TextBlock x:Name="FooterSpaceSaved" Text="0 B" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}" />
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>
